<div class="navbar navbar-expand-sm navbar-light navbar-dailymoon mx-3">
  <% if user_signed_in? %>
    <%= link_to "/", class: "nav-link" do %>
      Hi, <%= current_user.first_name.capitalize %>! <%= @zodiac_emoji %>
    <% end %>
    <li class="nav-item dropdown">
      <%= image_tag "moon1new.png", class: "avatar dropdown-toggle", id: "navbarDropdown", data: { bs_toggle: "dropdown" }, 'aria-haspopup': true, 'aria-expanded': false %>
      <div class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
        <%= link_to "My Profile", edit_user_registration_path, class: "dropdown-item" %>
        <%= link_to "Sign out", destroy_user_session_path, method: :delete, class: "dropdown-item", data: { turbo_method: :delete } %>
        <form action="/day" method="get">
        <div class="darkmode dropdown-item">
          <button id="darkmode_on" type="submit" name="theme" value="dark">🌙</button>
          <button id="darkmode_off" type="submit" name="theme" value="light">☀️</button>
        </div>
  </form>
      </div>
    </li>
  <% else %>
    <div>
      <%= link_to "/", class: "navbar-brand" do %>
        <%= image_tag "https://raw.githubusercontent.com/lewagon/fullstack-images/master/uikit/logo.png" %>
      <% end %>
    </div>
  <% end %>



  <script>
    var num = 100;
    var radius = 2;
    var max = 300;
    createRandomNodes(20, 2, 300);
    function createRandomNodes(num, radius, max) {
      var canvas = document.getElementsByClassName("navbar");
      var context = canvas.getContext("2d");
      context.clearRect(0, 0, canvas.width, canvas.height);
      for (var i = 0; i <=num; i++) {
          context.beginPath();
          var rand_x = Math.random(i) * max;
          var rand_y = Math.random(i) * max;
          context.arc(rand_x, rand_y, radius, 0, 2*Math.PI);
          context.fill();
          context.closePath();
      }
    }
  </script>
</div>
